import{a as v,S as B,N as C,P as x,b as _}from"./assets/vendor-RhONUmw2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();const w="https://books-backend.p.goit.global/books";async function f(){try{return(await v.get(`${w}/top-books`)).data.flatMap(r=>r.books).filter((r,n,i)=>n===i.findIndex(s=>s.title===r.title&&s.author===r.author))}catch(e){console.error("Error fetching top books:",e)}}async function L(e){try{return(await v.get(`${w}/category?category=${encodeURIComponent(e)}`)).data.filter((r,n,i)=>n===i.findIndex(s=>s.title===r.title&&s.author===r.author))}catch(t){console.error("Error fetching books by category:",t)}}const E=document.querySelectorAll(".category-item"),S=document.querySelector(".category-select"),h=document.querySelector(".books"),q=document.querySelector(".loader"),d=document.querySelector(".show-more-btn"),M=document.querySelector("#books-count");function g(){q.classList.remove("hidden")}function y(){q.classList.add("hidden")}function b(){d.classList.remove("hidden")}function u(){d.classList.add("hidden")}function A(e){return e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}let c=[],l=0,k=window.innerWidth<768?10:24;const $=4;function p(e){const t=Math.min(l+e,c.length),o=c.slice(l,t);h.insertAdjacentHTML("beforeend",P(o)),l=t,M.textContent=`Showing ${t} of ${c.length}`,l>=c.length&&u()}u();g();f().then(e=>{c=e,p(k),c.length>l&&b()}).finally(()=>{y()});d.addEventListener("click",()=>{p($);const t=document.querySelector(".books li").getBoundingClientRect().height;window.scrollBy({top:t*1,behavior:"smooth"}),d.blur()});function P(e){return e.map(t=>`
<li class="book-item">
  <img class="item-image" src="${t.book_image}" alt="${t.title}" />
  
  <div class="book-content">
    <div class="book-info">
      <div class="text-group">
        <h3 class="item-title">${A(t.title)}</h3>
        <p class="item-author">${t.author}</p>
      </div>
      <p class="item-price">$${t.price}</p>
    </div>
  </div>

  <button class="btn">Learn More</button>
</li>`).join("")}S.addEventListener("change",()=>{const e=S.value;u(),g(),h.innerHTML="",l=0,(e==="All categories"?f:()=>L(e))().then(o=>{c=o,p(k),c.length>l&&b()}).finally(()=>{y()})});E.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.category;u(),g(),h.innerHTML="",l=0,(t==="All categories"?f:()=>L(t))().then(r=>{c=r,p(k),c.length>l&&b()}).finally(()=>{y()})})});let a=null;function I(e){a&&m();const o=document.querySelector("#book-modal-template").content.cloneNode(!0);o.querySelector(".book-modal__image").src=e.image||"",o.querySelector(".book-modal__image").alt=e.title||"Book Cover",o.querySelector(".book-modal__title").textContent=e.title||"",o.querySelector(".book-modal__author").textContent=e.author||"",o.querySelector(".book-modal__price").textContent=e.price||"",o.querySelector(".book-modal__description").textContent=e.description||"",o.querySelector(".book-modal__shipping").textContent=e.shipping||"",o.querySelector(".book-modal__returns").textContent=e.returns||"",a=o,document.body.appendChild(a);const r=document.querySelector(".book-modal-backdrop");r.addEventListener("click",N),r.querySelector('[data-action="close-modal"]').addEventListener("click",m),F(r)}function m(){const e=document.querySelector(".book-modal-backdrop");e&&e.remove(),a=null}function N(e){e.target.classList.contains("book-modal-backdrop")&&m()}function F(e){const t=e.querySelectorAll(".accordion");t.forEach(o=>{o.addEventListener("click",()=>{t.forEach(n=>{n!==o&&(n.classList.remove("active"),n.nextElementSibling.classList.remove("open"))}),o.classList.toggle("active"),o.nextElementSibling.classList.toggle("open")})})}new B(".swiper",{modules:[C,x,_],speed:350,slidesPerView:"auto",spaceBetween:16,keyboard:{enabled:!0,onlyInViewport:!0},watchOverflow:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:"bullets",clickable:!0,bulletClass:"custom-bullet",bulletActiveClass:"custom-bullet-active"},breakpoints:{768:{slidesPerView:"auto",spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});document.addEventListener("click",e=>{const t=e.target.closest(".book-card");if(!t)return;t.dataset.bookId,I({title:"The Great Gatsby",author:"F. Scott Fitzgerald",price:"$9.99",image:"https://example.com/gatsby.jpg",description:"A novel set in the roaring twenties...",shipping:"Ships in 2â€“4 days",returns:"14-day return policy"})});
//# sourceMappingURL=index.js.map
