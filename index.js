import{S as h,N as b,a as q,P as B,b as E}from"./assets/vendor-5ZdD33SK.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const $=document.querySelectorAll(".mobile-menu-btn"),P=document.querySelector(".mobile-menu");$.forEach(e=>e.addEventListener("click",C));function C(){document.body.classList.toggle("no-scroll"),P.classList.toggle("is-open")}const A=document.querySelector(".mobile-nav");A.addEventListener("click",N);function N(e){e.target.className==="nav-link"&&(console.log(e.target),C())}new h(".hero-main-slider",{modules:[b],loop:!1,speed:300,slidesPerView:1,keyboard:{enabled:!0,onlyInViewport:!0},watchOverflow:!0,navigation:{nextEl:".swiper-button-hero-next",prevEl:".swiper-button-hero-prev"},breakpoints:{768:{slidesPerView:1},1440:{slidesPerView:1}}});const _="https://books-backend.p.goit.global/books";async function g(){try{return(await q.get(`${_}/top-books`)).data.flatMap(r=>r.books).filter((r,o,i)=>o===i.findIndex(s=>s.title===r.title&&s.author===r.author))}catch(e){console.error("Error fetching top books:",e)}}async function M(e){try{return(await q.get(`${_}/category?category=${encodeURIComponent(e)}`)).data.filter((r,o,i)=>o===i.findIndex(s=>s.title===r.title&&s.author===r.author))}catch(t){console.error("Error fetching books by category:",t)}}const V=document.querySelectorAll(".category-item"),L=document.querySelector(".category-select"),u=document.querySelector(".books"),x=document.querySelector(".loader"),d=document.querySelector(".show-more-btn"),I=document.querySelector("#books-count");function y(){x.classList.remove("hidden")}function k(){x.classList.add("hidden")}function w(){d.classList.remove("hidden")}function p(){d.classList.add("hidden")}function O(e){return e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}let c=[],l=0,v=window.innerWidth<768?10:24;const T=4;function f(e){const t=Math.min(l+e,c.length),n=c.slice(l,t);u.insertAdjacentHTML("beforeend",H(n)),l=t,I.textContent=`Showing ${t} of ${c.length}`,l>=c.length&&p()}p();y();g().then(e=>{c=e,f(v),c.length>l&&w()}).finally(()=>{k()});d.addEventListener("click",()=>{f(T);const t=document.querySelector(".books li").getBoundingClientRect().height;window.scrollBy({top:t*1,behavior:"smooth"}),d.blur()});u.addEventListener("click",e=>{e.target.classList.contains("btn")&&e.target.blur()});function H(e){return e.map(t=>`
<li class="book-item">
  <img class="item-image" src="${t.book_image}" alt="${t.title}" />
  
  <div class="book-content">
    <div class="book-info">
      <div class="text-group">
        <h3 class="item-title">${O(t.title)}</h3>
        <p class="item-author">${t.author}</p>
      </div>
      <p class="item-price">$${t.price}</p>
    </div>
  </div>

  <button class="btn" data-id="${t._id}">Learn More</button>
</li>`).join("")}L.addEventListener("change",()=>{const e=L.value;p(),y(),u.innerHTML="",l=0,(e==="All categories"?g:()=>M(e))().then(n=>{c=n,f(v),c.length>l&&w()}).finally(()=>{k()})});V.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.category;p(),y(),u.innerHTML="",l=0,(t==="All categories"?g:()=>M(t))().then(r=>{c=r,f(v),c.length>l&&w()}).finally(()=>{k()})})});let a=null;function F(e){a&&m();const t=document.querySelector("#book-modal-template");if(!t){console.error("Модальний шаблон не знайдено!");return}const n=t.content.cloneNode(!0);n.querySelector(".book-modal__image").src=e.image||"",n.querySelector(".book-modal__image").alt=e.title||"Book Cover",n.querySelector(".book-modal__title").textContent=e.title||"No title",n.querySelector(".book-modal__author").textContent=e.author||"Unknown author",n.querySelector(".book-modal__price").textContent=e.price?`$${e.price}`:"No price",n.querySelector(".book-modal__description").innerHTML=`<p>${e.description||"No description"}</p>`,n.querySelector(".book-modal__shipping").innerHTML=`<p>${e.shipping||"Shipping info unavailable"}</p>`,n.querySelector(".book-modal__returns").innerHTML=`<p>${e.returns||"Return info unavailable"}</p>`,a=n,document.body.appendChild(a);const r=document.querySelector(".book-modal-backdrop");if(!r)return;r.addEventListener("click",R);const o=r.querySelector('[data-action="close-modal"]');o&&o.addEventListener("click",m),j(r)}function m(){const e=document.querySelector(".book-modal-backdrop");e&&e.remove(),a=null}function R(e){e.target.classList.contains("book-modal-backdrop")&&m()}function j(e){const t=e.querySelectorAll(".accordion");t.forEach(n=>{const r=n.nextElementSibling;n.addEventListener("click",()=>{const o=n.classList.contains("active");t.forEach(i=>{var s;i.classList.remove("active"),(s=i.nextElementSibling)==null||s.classList.remove("open")}),o||(n.classList.add("active"),r==null||r.classList.add("open"))})})}new h(".swiper",{modules:[b,B,E],speed:350,slidesPerView:"auto",spaceBetween:16,keyboard:{enabled:!0,onlyInViewport:!0},watchOverflow:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".feedback .swiper-pagination",type:"bullets",clickable:!0,bulletClass:"custom-bullet",bulletActiveClass:"custom-bullet-active"},breakpoints:{768:{slidesPerView:"auto",spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});new h(".swiper-events",{modules:[b,B,E],wrapperClass:"swiper-wrapper-events",slideClass:"swiper-slide-events",speed:350,slidesPerView:"auto",spaceBetween:16,watchOverflow:!0,navigation:{nextEl:".swiper-events-button-next",prevEl:".swiper-events-button-prev"},pagination:{el:".slider-controls .swiper-pagination",clickable:!0,bulletClass:"custom-bullet",bulletActiveClass:"custom-bullet-active"},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});var S;(S=document.querySelector(".books"))==null||S.addEventListener("click",async e=>{const t=e.target.closest(".btn");if(!t)return;const n=t.dataset.id;if(n)try{const o=await(await fetch(`https://books-backend.p.goit.global/books/${n}`)).json(),i={image:o.book_image,title:o.title,author:o.author,price:o.price,description:o.description,shipping:"Безкоштовна доставка",returns:"Повернення протягом 14 днів"};F(i)}catch(r){console.error("Помилка при завантаженні книги:",r)}});
//# sourceMappingURL=index.js.map
