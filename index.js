import{a as v,S,N as L,P as B,b as C}from"./assets/vendor-RhONUmw2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const q="https://books-backend.p.goit.global/books";async function f(){try{return(await v.get(`${q}/top-books`)).data.flatMap(r=>r.books).filter((r,n,s)=>n===s.findIndex(c=>c.title===r.title&&c.author===r.author))}catch(e){console.error("Error fetching top books:",e)}}async function x(e){try{return(await v.get(`${q}/category?category=${encodeURIComponent(e)}`)).data.filter((r,n,s)=>n===s.findIndex(c=>c.title===r.title&&c.author===r.author))}catch(t){console.error("Error fetching books by category:",t)}}const _=document.querySelectorAll(".category-item"),w=document.querySelector(".category-select"),h=document.querySelector(".books"),E=document.querySelector(".loader"),d=document.querySelector(".show-more-btn"),A=document.querySelector("#books-count");function g(){E.classList.remove("hidden")}function b(){E.classList.add("hidden")}function y(){d.classList.remove("hidden")}function u(){d.classList.add("hidden")}function M(e){return e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}let i=[],l=0,k=window.innerWidth<768?10:24;const P=4;function p(e){const t=Math.min(l+e,i.length),o=i.slice(l,t);h.insertAdjacentHTML("beforeend",$(o)),l=t,A.textContent=`Showing ${t} of ${i.length}`,l>=i.length&&u()}u();g();f().then(e=>{i=e,p(k),i.length>l&&y()}).finally(()=>{b()});d.addEventListener("click",()=>{p(P);const t=document.querySelector(".books li").getBoundingClientRect().height;window.scrollBy({top:t*1,behavior:"smooth"}),d.blur()});function $(e){return e.map(t=>`
<li class="book-item">
  <img class="item-image" src="${t.book_image}" alt="${t.title}" />
  
  <div class="book-content">
    <div class="book-info">
      <div class="text-group">
        <h3 class="item-title">${M(t.title)}</h3>
        <p class="item-author">${t.author}</p>
      </div>
      <p class="item-price">$${t.price}</p>
    </div>
  </div>

  <button class="btn">Learn More</button>
</li>`).join("")}w.addEventListener("change",()=>{const e=w.value;u(),g(),h.innerHTML="",l=0,(e==="All categories"?f:()=>x(e))().then(o=>{i=o,p(k),i.length>l&&y()}).finally(()=>{b()})});_.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.category;u(),g(),h.innerHTML="",l=0,(t==="All categories"?f:()=>x(t))().then(r=>{i=r,p(k),i.length>l&&y()}).finally(()=>{b()})})});let a=null;function I(e){a&&m();const o=document.querySelector("#book-modal-template").content.cloneNode(!0);o.querySelector(".book-modal__image").src=e.image||"",o.querySelector(".book-modal__image").alt=e.title||"Book Cover",o.querySelector(".book-modal__title").textContent=e.title||"",o.querySelector(".book-modal__author").textContent=e.author||"",o.querySelector(".book-modal__price").textContent=e.price||"",o.querySelector(".book-modal__description").textContent=e.description||"",o.querySelector(".book-modal__shipping").textContent=e.shipping||"",o.querySelector(".book-modal__returns").textContent=e.returns||"",a=o,document.body.appendChild(a);const r=document.querySelector(".book-modal-backdrop");r.addEventListener("click",N),r.querySelector('[data-action="close-modal"]').addEventListener("click",m),O(r)}function m(){const e=document.querySelector(".book-modal-backdrop");e&&e.remove(),a=null}function N(e){e.target.classList.contains("book-modal-backdrop")&&m()}function O(e){const t=e.querySelectorAll(".accordion");t.forEach(o=>{o.addEventListener("click",()=>{t.forEach(n=>{n!==o&&(n.classList.remove("active"),n.nextElementSibling.classList.remove("open"))}),o.classList.toggle("active"),o.nextElementSibling.classList.toggle("open")})})}new S(".swiper",{modules:[L,B,C],speed:350,slidesPerView:"auto",spaceBetween:16,keyboard:{enabled:!0,onlyInViewport:!0},watchOverflow:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".feedback .swiper-pagination",type:"bullets",clickable:!0,bulletClass:"custom-bullet",bulletActiveClass:"custom-bullet-active"},breakpoints:{768:{slidesPerView:"auto",spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});new S(".swiper-events",{modules:[L,B,C],wrapperClass:"swiper-wrapper-events",slideClass:"swiper-slide-events",speed:350,slidesPerView:"auto",spaceBetween:16,watchOverflow:!0,navigation:{nextEl:".swiper-events-button-next",prevEl:".swiper-events-button-prev"},pagination:{el:".slider-controls .swiper-pagination",clickable:!0,bulletClass:"custom-bullet",bulletActiveClass:"custom-bullet-active"},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});document.addEventListener("click",e=>{const t=e.target.closest(".book-card");if(!t)return;t.dataset.bookId,I({title:"The Great Gatsby",author:"F. Scott Fitzgerald",price:"$9.99",image:"https://example.com/gatsby.jpg",description:"A novel set in the roaring twenties...",shipping:"Ships in 2â€“4 days",returns:"14-day return policy"})});
//# sourceMappingURL=index.js.map
