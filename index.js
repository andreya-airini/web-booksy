import{S,N as q,a as F,P as O,b as T}from"./assets/vendor-5ZdD33SK.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const J=document.querySelectorAll(".mobile-menu-btn"),Q=document.querySelector(".mobile-menu");J.forEach(e=>e.addEventListener("click",H));function H(){document.body.classList.toggle("no-scroll"),Q.classList.toggle("is-open")}const X=document.querySelector(".mobile-nav");X.addEventListener("click",Y);function Y(e){e.target.className==="nav-link"&&(console.log(e.target),H())}new S(".hero-main-slider",{modules:[q],loop:!1,speed:300,slidesPerView:1,keyboard:{enabled:!0,onlyInViewport:!0},watchOverflow:!0,navigation:{nextEl:".swiper-button-hero-next",prevEl:".swiper-button-hero-prev"},breakpoints:{768:{slidesPerView:1},1440:{slidesPerView:1}}});const R="https://books-backend.p.goit.global/books";async function B(){try{return(await F.get(`${R}/top-books`)).data.flatMap(o=>o.books).filter((o,s,r)=>s===r.findIndex(i=>i.title===o.title&&i.author===o.author))}catch(e){console.error("Error fetching top books:",e)}}async function j(e){try{return(await F.get(`${R}/category?category=${encodeURIComponent(e)}`)).data.filter((o,s,r)=>s===r.findIndex(i=>i.title===o.title&&i.author===o.author))}catch(t){console.error("Error fetching books by category:",t)}}const Z=document.querySelectorAll(".category-item"),$=document.querySelector(".category-select"),y=document.querySelector(".books"),U=document.querySelector(".loader"),f=document.querySelector(".show-more-btn"),D=document.querySelector("#books-count");function C(){U.classList.remove("hidden")}function x(){U.classList.add("hidden")}function M(){f.classList.remove("hidden")}function h(){f.classList.add("hidden")}function ee(e){return e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}let c=[],l=0,_=window.innerWidth<768?10:24;const te=4;function g(e){const t=Math.min(l+e,c.length),n=c.slice(l,t);y.insertAdjacentHTML("beforeend",oe(n)),l=t,D.textContent=`Showing ${t} of ${c.length}`,l>=c.length&&h()}h();C();B().then(e=>{c=e,g(_),c.length>l&&M()}).finally(()=>{x()});f.addEventListener("click",()=>{g(te);const t=document.querySelector(".books li").getBoundingClientRect().height;window.scrollBy({top:t*1,behavior:"smooth"}),f.blur()});y.addEventListener("click",e=>{e.target.classList.contains("btn")&&e.target.blur()});function oe(e){return e.map(t=>`
<li class="book-item">
  <img class="item-image" src="${t.book_image}" alt="${t.title}" />
  
  <div class="book-content">
    <div class="book-info">
      <div class="text-group">
        <h3 class="item-title">${ee(t.title)}</h3>
        <p class="item-author">${t.author}</p>
      </div>
      <p class="item-price">$${t.price}</p>
    </div>
  </div>

  <button class="btn" data-id="${t._id}">Learn More</button>
</li>`).join("")}$.addEventListener("change",()=>{const e=$.value;h(),C(),y.innerHTML="",l=0,(e==="All categories"?B:()=>j(e))().then(n=>{c=n,g(_),c.length>l&&M()}).finally(()=>{x()})});Z.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.category;h(),C(),y.innerHTML="",l=0,(t==="All categories"?B:()=>j(t))().then(o=>{c=o,g(_),c.length>l&&M()}).finally(()=>{x()})})});let p=null;function ne(e){p&&E();const t=document.querySelector("#book-modal-template");if(!t){console.error("–ú–æ–¥–∞–ª—å–Ω–∏–π —à–∞–±–ª–æ–Ω –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!");return}const n=t.content.cloneNode(!0);n.querySelector(".book-modal__image").src=e.image||"",n.querySelector(".book-modal__image").alt=e.title||"Book Cover",n.querySelector(".book-modal__title").textContent=e.title||"No title",n.querySelector(".book-modal__author").textContent=e.author||"Unknown author",n.querySelector(".book-modal__price").textContent=e.price?`$${e.price}`:"No price",n.querySelector(".book-modal__description").innerHTML=`<p>${e.description||"No description"}</p>`,n.querySelector(".book-modal__shipping").innerHTML=`<p>${e.shipping||"Shipping info unavailable"}</p>`,n.querySelector(".book-modal__returns").innerHTML=`<p>${e.returns||"Return info unavailable"}</p>`,p=n,document.body.appendChild(p),document.body.style.overflow="hidden";const o=document.querySelector(".book-modal-backdrop");if(!o)return;o.addEventListener("click",se);const s=o.querySelector('[data-action="close-modal"]');s&&s.addEventListener("click",E),re(o);let r=1;const i=o.querySelector(".qty-value"),b=o.querySelector('[data-action="decrement"]'),w=o.querySelector('[data-action="increment"]');b==null||b.addEventListener("click",()=>{r>1&&r--,i&&(i.textContent=r)}),w==null||w.addEventListener("click",()=>{r++,i&&(i.textContent=r)});const L=o.querySelector(".book-modal__add-to-cart"),k=o.querySelector(".book-modal__buy-now");L==null||L.addEventListener("click",()=>{console.log("üõí Add to Cart:",{title:e.title,quantity:r})}),k==null||k.addEventListener("click",()=>{console.log("üí≥ Buy Now:",{title:e.title,quantity:r})})}function E(){const e=document.querySelector(".book-modal-backdrop");e&&e.remove(),p=null,document.body.style.overflow=""}function se(e){e.target.classList.contains("book-modal-backdrop")&&E()}function re(e){const t=e.querySelectorAll(".accordion");t.forEach(n=>{const o=n.nextElementSibling;n.addEventListener("click",()=>{const s=n.classList.contains("active");t.forEach(r=>{var i;r.classList.remove("active"),(i=r.nextElementSibling)==null||i.classList.remove("open")}),s||(n.classList.add("active"),o==null||o.classList.add("open"))})})}new S(".swiper",{modules:[q,O,T],speed:350,slidesPerView:"auto",spaceBetween:16,keyboard:{enabled:!0,onlyInViewport:!0},watchOverflow:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".feedback .swiper-pagination",type:"bullets",clickable:!0,bulletClass:"custom-bullet",bulletActiveClass:"custom-bullet-active"},breakpoints:{768:{slidesPerView:"auto",spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});new S(".swiper-events",{modules:[q,O,T],wrapperClass:"swiper-wrapper-events",slideClass:"swiper-slide-events",speed:350,slidesPerView:"auto",spaceBetween:16,watchOverflow:!0,navigation:{nextEl:".swiper-events-button-next",prevEl:".swiper-events-button-prev"},pagination:{el:".slider-controls .swiper-pagination",clickable:!0,bulletClass:"custom-bullet",bulletActiveClass:"custom-bullet-active"},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});const u=document.getElementById("modalOverlay"),z=document.getElementById("modal"),v=document.getElementById("contactForm"),A=document.getElementById("submitBtn"),N=document.getElementById("loading"),K=document.getElementById("successMessage"),m=document.getElementById("name"),a=document.getElementById("email"),ie=document.getElementById("message"),I=document.getElementById("nameError"),d=document.getElementById("emailError");function P(){u.classList.remove("active"),document.body.classList.remove("modal-open"),setTimeout(()=>{ce()},300)}function ce(){v.reset(),W(),le()}function W(){I.classList.remove("show"),d.classList.remove("show"),m.classList.remove("error"),a.classList.remove("error")}function le(){v.style.display="block",K.classList.remove("show"),document.querySelector(".modal-header").style.display="block"}function ae(){v.style.display="none",document.querySelector(".modal-header").style.display="none",K.classList.add("show")}function G(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function de(){let e=!0;return W(),m.value.trim()||(I.classList.add("show"),m.classList.add("error"),e=!1),a.value.trim()?G(a.value.trim())||(d.textContent="Please enter a valid email address",d.classList.add("show"),a.classList.add("error"),e=!1):(d.textContent="Please enter your email address",d.classList.add("show"),a.classList.add("error"),e=!1),e}v.addEventListener("submit",async function(e){if(e.preventDefault(),!!de()){A.disabled=!0,document.querySelector(".button-text").style.display="none",N.classList.add("show");try{await new Promise(n=>setTimeout(n,2e3));const t={name:m.value.trim(),email:a.value.trim(),message:ie.value.trim(),event:'Cozy Book Club ‚Äî "The Midnight Library"'};console.log("Form submitted:",t),ae(),setTimeout(()=>{P()},3e3)}catch(t){console.error("Error submitting form:",t),alert("Sorry, there was an error submitting your registration. Please try again.")}finally{A.disabled=!1,document.querySelector(".button-text").style.display="block",N.classList.remove("show")}}});m.addEventListener("input",function(){this.value.trim()&&(I.classList.remove("show"),this.classList.remove("error"))});a.addEventListener("input",function(){this.value.trim()&&G(this.value.trim())&&(d.classList.remove("show"),this.classList.remove("error"))});u.addEventListener("click",function(e){e.target===u&&P()});document.addEventListener("keydown",function(e){e.key==="Escape"&&u.classList.contains("active")&&P()});z.addEventListener("click",function(e){e.stopPropagation()});const ue=["button","input","textarea","select",'[tabindex]:not([tabindex="-1"])'];u.addEventListener("keydown",function(e){if(e.key==="Tab"&&u.classList.contains("active")){const t=z.querySelectorAll(ue.join(",")),n=t[0],o=t[t.length-1];e.shiftKey?document.activeElement===n&&(o.focus(),e.preventDefault()):document.activeElement===o&&(n.focus(),e.preventDefault())}});document.addEventListener("DOMContentLoaded",function(){console.log("Contact Modal initialized")});var V;(V=document.querySelector(".books"))==null||V.addEventListener("click",async e=>{const t=e.target.closest(".btn");if(!t)return;const n=t.dataset.id;if(n)try{const s=await(await fetch(`https://books-backend.p.goit.global/books/${n}`)).json(),r={image:s.book_image,title:s.title,author:s.author,price:s.price,description:s.description,shipping:"–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞",returns:"–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø—Ä–æ—Ç—è–≥–æ–º 14 –¥–Ω—ñ–≤"};ne(r)}catch(o){console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –∫–Ω–∏–≥–∏:",o)}});
//# sourceMappingURL=index.js.map
