{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/book.js","../src/js/book-modal.js","../src/js/feedback.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_BASE_URL = 'https://books-backend.p.goit.global/books';\n\nexport async function fetchTopBooks() {\n  try {\n    const response = await axios.get(\n      `${API_BASE_URL}/top-books`\n    );\n    const topBooks = response.data.flatMap(category => category.books);\n    const uniqueBooks = topBooks.filter(\n      (book, index, self) =>\n        index ===\n        self.findIndex(b => b.title === book.title && b.author === book.author)\n    );\n    return uniqueBooks;\n    \n  } catch (error) {\n    console.error('Error fetching top books:', error);\n  }\n}\n\nexport async function fetchBooksByCategory(category) {\n  try {\n    const response = await axios.get(\n      `${API_BASE_URL}/category?category=${encodeURIComponent(category)}`\n    );\n    const uniqueBooks = response.data.filter(\n      (book, index, self) =>\n        index ===\n        self.findIndex(b => b.title === book.title && b.author === book.author)\n    );\n    return uniqueBooks;\n  } catch (error) {\n    console.error('Error fetching books by category:', error);\n  }\n}\n","import { fetchTopBooks, fetchBooksByCategory } from './api.js';\n\nconst categories = document.querySelectorAll('.category-item');\nconst categoriesSelect = document.querySelector('.category-select');\nconst booksContainer = document.querySelector('.books');\nconst loader = document.querySelector('.loader');\nconst showMore = document.querySelector('.show-more-btn');\nconst booksCount = document.querySelector('#books-count');\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showShowMoreBtn() {\n  showMore.classList.remove('hidden');\n}\n\nfunction hideShowMoreBtn() {\n  showMore.classList.add('hidden');\n}\n\nfunction capitalizeTitle(title) {\n  return title\n    .toLowerCase()\n    .split(' ')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(' ');\n}\n\nlet allBooks = [];\nlet currentIndex = 0;\nlet initialAmount = window.innerWidth < 768 ? 10 : 24;\nconst stepRender = 4;\n\nfunction renderBatch(amount) {\n  const rendered = Math.min(currentIndex + amount, allBooks.length);\n  const nextSlice = allBooks.slice(currentIndex, rendered);\n  booksContainer.insertAdjacentHTML('beforeend', createMarkup(nextSlice));\n  currentIndex = rendered;\n  booksCount.textContent = `Showing ${rendered} of ${allBooks.length}`;\n  if (currentIndex >= allBooks.length) {\n    hideShowMoreBtn();\n  }\n}\n\nhideShowMoreBtn();\nshowLoader();\nfetchTopBooks()\n  .then(books => {\n    allBooks = books;\n    renderBatch(initialAmount);\n    if (allBooks.length > currentIndex) {\n      showShowMoreBtn();\n    }\n  })\n  .finally(() => {\n    hideLoader();\n  });\n\n\nshowMore.addEventListener('click', () => {\n  renderBatch(stepRender);\n  const firstCard = document.querySelector('.books li');\n  const cardHeight = firstCard.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 1,\n    behavior: 'smooth',\n  });\n  showMore.blur();\n});\n\n\n// booksContainer.addEventListener('click', e => {\n//   if (e.target.classList.contains('btn')) {\n//     e.target.blur();\n//   }\n// });\n\nfunction createMarkup(books) {\n  return books\n    .map(item => {\n      return `\n<li class=\"book-item\">\n  <img class=\"item-image\" src=\"${item.book_image}\" alt=\"${item.title}\" />\n  \n  <div class=\"book-content\">\n    <div class=\"book-info\">\n      <div class=\"text-group\">\n        <h3 class=\"item-title\">${capitalizeTitle(item.title)}</h3>\n        <p class=\"item-author\">${item.author}</p>\n      </div>\n      <p class=\"item-price\">$${item.price}</p>\n    </div>\n  </div>\n\n  <button class=\"btn\">Learn More</button>\n</li>`;\n    })\n    .join('');\n}\n\ncategoriesSelect.addEventListener('change', () => {\n  const categoryName = categoriesSelect.value;\n  hideShowMoreBtn();\n  showLoader();\n  booksContainer.innerHTML = '';\n  currentIndex = 0;\n\n  const fetchFn =\n    categoryName === 'All categories'\n      ? fetchTopBooks\n      : () => fetchBooksByCategory(categoryName);\n\n  fetchFn()\n    .then(books => {\n      allBooks = books;\n      renderBatch(initialAmount);\n      if (allBooks.length > currentIndex) {\n        showShowMoreBtn();\n      }\n    })\n    .finally(() => {\n      hideLoader();\n    });\n});\n\ncategories.forEach(category => {\n  category.addEventListener('click', () => {\n    const categoryName = category.dataset.category;\n\n    hideShowMoreBtn();\n    showLoader();\n    booksContainer.innerHTML = '';\n    currentIndex = 0;\n\n    const fetchFn =\n      categoryName === 'All categories'\n        ? fetchTopBooks\n        : () => fetchBooksByCategory(categoryName);\n\n    fetchFn()\n      .then(books => {\n        allBooks = books;\n        renderBatch(initialAmount);\n        if (allBooks.length > currentIndex) {\n          showShowMoreBtn();\n        }\n      })\n      .finally(() => {\n        hideLoader();\n      });\n  });\n});\n","import Accordion from 'accordion-js';\nimport 'accordion-js/dist/accordion.min.css';\n\nlet modalInstance = null;\n\nexport function openBookModal(bookData) {\n  if (modalInstance) closeBookModal();\n\n  const template = document.querySelector('#book-modal-template');\n  const modalMarkup = template.content.cloneNode(true);\n\n  modalMarkup.querySelector('.book-modal__image').src = bookData.image || '';\n  modalMarkup.querySelector('.book-modal__image').alt =\n    bookData.title || 'Book Cover';\n  modalMarkup.querySelector('.book-modal__title').textContent =\n    bookData.title || '';\n  modalMarkup.querySelector('.book-modal__author').textContent =\n    bookData.author || '';\n  modalMarkup.querySelector('.book-modal__price').textContent =\n    bookData.price || '';\n  modalMarkup.querySelector('.book-modal__description').textContent =\n    bookData.description || '';\n  modalMarkup.querySelector('.book-modal__shipping').textContent =\n    bookData.shipping || '';\n  modalMarkup.querySelector('.book-modal__returns').textContent =\n    bookData.returns || '';\n\n  modalInstance = modalMarkup;\n  document.body.appendChild(modalInstance);\n\n  const backdrop = document.querySelector('.book-modal-backdrop');\n  backdrop.addEventListener('click', onBackdropClick);\n  backdrop\n    .querySelector('[data-action=\"close-modal\"]')\n    .addEventListener('click', closeBookModal);\n\n  initAccordions(backdrop);\n}\n\nexport function closeBookModal() {\n  const backdrop = document.querySelector('.book-modal-backdrop');\n  if (backdrop) backdrop.remove();\n  modalInstance = null;\n}\n\nfunction onBackdropClick(e) {\n  if (e.target.classList.contains('book-modal-backdrop')) {\n    closeBookModal();\n  }\n}\n\nfunction initAccordions(container) {\n  const accordions = container.querySelectorAll('.accordion');\n\n  accordions.forEach(btn => {\n    btn.addEventListener('click', () => {\n      accordions.forEach(acc => {\n        if (acc !== btn) {\n          acc.classList.remove('active');\n          acc.nextElementSibling.classList.remove('open');\n        }\n      });\n\n      btn.classList.toggle('active');\n      const panel = btn.nextElementSibling;\n      panel.classList.toggle('open');\n    });\n  });\n}\n","import Swiper from 'swiper';\nimport { Navigation, Pagination, Scrollbar } from 'swiper/modules';\n\nconst swiper = new Swiper('.swiper', {\n  \n  modules: [Navigation, Pagination, Scrollbar],\n  speed: 350,\n  slidesPerView: 'auto',\n  spaceBetween: 16,\n  keyboard: { enabled: true, onlyInViewport: true },             \n  watchOverflow: true,\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n  pagination: {\n    el: '.swiper-pagination',\n    type: 'bullets',        \n    clickable: true,         \n    bulletClass: 'custom-bullet',          \n    bulletActiveClass: 'custom-bullet-active'\n  },\n  breakpoints: {                                                \n    768: {            \n      slidesPerView: 'auto',\n      spaceBetween: 24,\n    },\n    1440: {           \n      slidesPerView: 3,\n      spaceBetween: 24,\n    },\n  },\n});","import './js/header';\nimport './js/mobile-menu';\nimport './js/hero';\nimport './js/book';\nimport './js/book-modal';\nimport './js/feedback';\nimport './js/events';\nimport './js/contact-modal';\n\nimport { openBookModal } from './js/book-modal.js';\n\ndocument.addEventListener('click', event => {\n  const bookCard = event.target.closest('.book-card');\n  if (!bookCard) return;\n\n  const bookId = bookCard.dataset.bookId;\n\n  const exampleBook = {\n    title: 'The Great Gatsby',\n    author: 'F. Scott Fitzgerald',\n    price: '$9.99',\n    image: 'https://example.com/gatsby.jpg',\n    description: 'A novel set in the roaring twenties...',\n    shipping: 'Ships in 2â€“4 days',\n    returns: '14-day return policy',\n  };\n\n  openBookModal(exampleBook);\n});\n"],"names":["API_BASE_URL","fetchTopBooks","axios","category","book","index","self","b","error","fetchBooksByCategory","categories","categoriesSelect","booksContainer","loader","showMore","booksCount","showLoader","hideLoader","showShowMoreBtn","hideShowMoreBtn","capitalizeTitle","title","word","allBooks","currentIndex","initialAmount","stepRender","renderBatch","amount","rendered","nextSlice","createMarkup","books","cardHeight","item","categoryName","modalInstance","openBookModal","bookData","closeBookModal","modalMarkup","backdrop","onBackdropClick","initAccordions","container","accordions","btn","acc","Swiper","Navigation","Pagination","Scrollbar","event","bookCard"],"mappings":"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"}